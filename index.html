<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Laborum eum deserunt, eligendi unde quis possimus
        aliquid maiores cumque quia consectetur voluptas. Eum magnam sunt aliquid similique consectetur laboriosam!
        Doloribus reprehenderit quia harum quisquam nemo dicta aspernatur nisi consectetur. Quas fugit voluptatem optio
        est vitae inventore consequatur consectetur magni dolorem nobis.</p>
    <input type="button" value="Replace Selected Text" onClick="makeBoldSelection();">
    <script>
        function updateValue() {
            let x = document.getElementById(`${uniqueId}`).value;
            console.log("handle input change " + uniqueId)
            console.log(x.length)
        }
        var uniqueId;
        function makeBoldSelection() {
            // var selectedText = document.getSelection()
            // const text = selectedText.toString()
            // console.log(text.length)
            // const replacementString = "_".repeat(text.length)
            uniqueId = Date.now()
            console.log("unique id in id : ", uniqueId)
            const inputElement = `<input id= ${uniqueId}  oninput="updateValue()" ></input>`
            document.body.innerHTML = document.body.innerHTML.replace(window.getSelection(), inputElement);
            const input = document.querySelector('input');
            input.addEventListener('input', updateValue);

        }
    </script>
</body>

</html>